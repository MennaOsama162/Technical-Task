
CREATE DATABASE egydynamics;
GO

USE egydynamics;
GO

CREATE TABLE client(
    id INT IDENTITY(1,1) PRIMARY KEY,
    [??? ??????] NVARCHAR(255) NOT NULL,
    [?????] NVARCHAR(MAX),
    [???????] NVARCHAR(255),
    [????? ??????] NVARCHAR(255),
    [????? ???????] DATE,
    [??? ????? ??] DATE DEFAULT CAST(GETDATE() AS DATE),
    [??? ????????] NVARCHAR(255),
    [???? ??????] NVARCHAR(255),
    [????? ??????] NVARCHAR(255)
);
GO

CREATE TRIGGER trg_UpdateTimestamp
ON client
AFTER UPDATE
AS
BEGIN
    SET NOCOUNT ON;
    UPDATE client
    SET [??? ????? ??] = CAST(GETDATE() AS DATE)
    FROM INSERTED i
    WHERE client.id = i.id;
END;
GO

CREATE TRIGGER InsertclientTrigger
ON client
AFTER INSERT
AS
BEGIN
    SET NOCOUNT ON;
    
    UPDATE client
    SET [????? ???????] = GETDATE()
    FROM inserted
    WHERE client.id = inserted.id;
END;


use egydynamics

INSERT INTO client([??? ??????], [?????], [???????], [????? ??????], [????? ???????], [??? ????????], [???? ??????], [????? ??????])
VALUES 
(N'???? ????', N'??? ?????? 1', N'????', N'????? 1', '2024-01-01', N'?????? 1', N'???? 1', N'????? 1'),
(N'???? ???', N'??? ?????? 2', N'?????', N'????? 2', '2024-01-02', N'?????? 2', N'???? 2', N'????? 2'),
(N'???? ???', N'??? ?????? 3', N'?????', N'????? 3', '2024-01-03', N'?????? 3', N'???? 3', N'????? 3'),
(N'??? ???', N'??? ?????? 4', N'?????', N'????? 4', '2024-01-04', N'?????? 4', N'???? 4', N'????? 4'),
(N'???? ???????', N'??? ?????? 5', N'????', N'????? 5', '2024-01-05', N'?????? 5', N'???? 5', N'????? 5'),
(N'???? ????', N'??? ?????? 6', N'?????', N'????? 6', '2024-01-06', N'?????? 6', N'???? 6', N'????? 6'),
(N'????? ????', N'??? ?????? 7', N'????', N'????? 7', '2024-01-07', N'?????? 7', N'???? 7', N'????? 7'),
(N'???? ?????', N'??? ?????? 8', N'?????', N'????? 8', '2024-01-08', N'?????? 8', N'???? 8', N'????? 8'),
(N'????? ????', N'??? ?????? 9', N'????', N'????? 9', '2024-01-09', N'?????? 9', N'???? 9', N'????? 9'),
(N'???? ??? ????', N'??? ?????? 10', N'????', N'????? 10', '2024-01-10', N'?????? 10', N'???? 10', N'????? 10');
GO

